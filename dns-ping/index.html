<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste DNS - WebUI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ Teste DNS Real</h1>
            <p>Ferramenta que testa a latÃªncia REAL da sua internet com servidores DNS IPv4 e IPv6.</p>
            <p>O teste executa localmente a partir do seu navegador enviando as requisiÃ§Ãµes para o provedor desejado.</p>
        </div>

        <div class="ip-info loading" id="ipInfo">
            <span class="icon">ğŸŒ</span>
            <span>Detectando seu endereÃ§o IP atual...</span>
        </div>

        <div class="custom-dns">
            <div id="customBanner" class="custom-banner" style="display:none;">
            <div class="alert">
            <b>âš ï¸ Aviso</b> O DNS Customizado Ã© limitado pelas regras de Cross-Origin Resource Sharing (CORS) do seu navegador e:
            <ul>
                <li>NÃƒO informa se o endereÃ§o estÃ¡ online ou offline, sempre resultando em ping bem-sucedido dado ao fallback do mÃ©todo.</li>
                <li>NÃƒO analisa DNS Local como pfSense, Adguard ou PiHole: O uso de endereÃ§os reservados estÃ¡ vetado neste teste.</li>
                Certifique-se de que o endereÃ§o DNS customizado esteja online com a porta 53 disponÃ­vel, assim o teste darÃ¡ o resultado desejado.</li>
            </ul>
            </div>
            </div>
            <h3>âš™ï¸ Adicionar DNS Customizado</h3>
            <div class="dns-input-group">
                <input
                    type="text"
                    class="dns-input"
                    id="customDnsIp"
                    placeholder="Digite o DNS (IPv4: 1.1.1.1 ou IPv6: 2001:4860:4860::8888)"
                    oninput="validateIpInput()"
                >
                <span class="ip-type-indicator" id="ipTypeIndicator" style="display: none;"></span>
                <input
                    type="text"
                    class="provider-input"
                    id="customDnsProvider"
                    placeholder="Nome do provedor"
                    maxlength="20"
                >
                <button class="btn-add" onclick="addCustomDns()">
                    â• Adicionar
                </button>
            </div>
            <div class="custom-dns-list" id="customDnsList"></div>
        </div>

        <div class="controls">
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('ipv4')" id="tab-ipv4">
                        ğŸ”µ Somente IPv4
                    </button>
                    <button class="tab" onclick="switchTab('ipv6')" id="tab-ipv6">
                        ğŸŸ¢ Somente IPv6
                    </button>
                    <button class="tab" onclick="switchTab('custom')" id="tab-custom">
                        âš™ï¸ Customizados
                    </button>
                    <button class="tab" onclick="switchTab('all')" id="tab-all">
                        ğŸŒ Todos
                    </button>
                </div>

                <div class="tab-content active" id="content-ipv4">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="startTest('ipv4')">
                            â–¶ï¸ Testar
                        </button>
                        <button class="btn btn-secondary" onclick="stopTest()">
                            â¹ï¸ Parar
                        </button>
                        <button class="btn btn-info" onclick="clearResults()">
                            ğŸ—‘ï¸ Limpar
                        </button>
                    </div>
                </div>

                <div class="tab-content" id="content-ipv6">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="startTest('ipv6')">
                            â–¶ï¸ Testar
                        </button>
                        <button class="btn btn-secondary" onclick="stopTest()">
                            â¹ï¸ Parar
                        </button>
                        <button class="btn btn-info" onclick="clearResults()">
                            ğŸ—‘ï¸ Limpar
                        </button>
                    </div>
                </div>

                <div class="tab-content" id="content-custom">
                    <div class="button-group">
                        <button class="btn btn-custom" onclick="startTest('custom')" id="customTestBtn" disabled>
                            âš™ï¸ Testar
                        </button>
                        <button class="btn btn-secondary" onclick="stopTest()">
                            â¹ï¸ Parar
                        </button>
                        <button class="btn btn-info" onclick="clearResults()">
                            ğŸ—‘ï¸ Limpar
                        </button>
                    </div>
                </div>

                <div class="tab-content" id="content-all">
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="startTest('all')">
                            â–¶ï¸ Testar
                        </button>
                        <button class="btn btn-secondary" onclick="stopTest()">
                            â¹ï¸ Parar
                        </button>
                        <button class="btn btn-info" onclick="clearResults()">
                            ğŸ—‘ï¸ Limpar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Preparando...</div>
        </div>

        <div class="results" id="results">
            <div class="dns-grid" id="dnsGrid"></div>

            <div class="stats" id="stats">
                <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">ğŸ“Š EstatÃ­sticas da Sua ConexÃ£o</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="successCount" style="color: #4CAF50;">0</div>
                        <div class="stat-label">DNS AcessÃ­vel(eis)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="errorCount" style="color: #f44336;">0</div>
                        <div class="stat-label">DNS InacessÃ­vel(is)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgPing" style="color: #2196F3;">0ms</div>
                        <div class="stat-label">LatÃªncia MÃ©dia</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="top3Dns" style="color: #FF9800; font-size: 1rem; line-height: 1.3;">-</div>
                        <div class="stat-label">DNS Mais RÃ¡pido</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;">
                    ğŸ”’ DNS over HTTPS &nbsp;|&nbsp; ğŸ‡§ğŸ‡· Sites Brasileiros &nbsp;|&nbsp; ğŸŒ Sites Globais &nbsp;|&nbsp; âš™ï¸ DNS Customizado &nbsp;|&nbsp; ğŸ†• IPv6
                </div>
            </div>
        </div>
        <div class="history-section" id="historySection">
            <div id="historyContainer"></div>
        </div>
    </div>
    </div>

    <script src="script.js"></script>

</body>
</html>
